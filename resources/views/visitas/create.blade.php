@extends('layouts.app')

@section('titulo', 'Crear Visita')
@section('css')
<link rel="stylesheet" href="assets/vendors/simple-datatables/style.css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
<style>
   .canvas-container {
    position: relative;
    display: inline-block;
    width: 100%; /* El contenedor se adapta al diseño */
}

#car-image, #drawing-canvas {
    position: absolute;
    top: 0;
    left: 100px;
    width: 1200px;
    height: 200px;
    display: block;
}

#drawing-canvas {
    pointer-events: auto;
    z-index: 2; /* Canvas encima de la imagen */
}

#car-image {
    pointer-events: none; /* La imagen no captura eventos del mouse */
    z-index: 1; /* Imagen debajo del canvas */
}

.selected {
    fill: red; /* Cambia el color del SVG a rojo */
}
</style>
@endsection

@section('content')

    <div class="page-heading card" style="box-shadow: none !important">

        <div class="page-title card-body p-3">
            <h3>Crear Nueva Visita</h3>
        </div>

        <section class="section pt-4">
            <div class="card">
                <div class="card-body">
                    <form action="{{ route('visitas.store') }}" method="POST" style="" onsubmit="return saveCanvasToInput()">
                        @csrf
                        <input type="hidden" id="foto_danos" name="foto_daños" value="">

                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="coche_id">Coche</label>
                                    <div>
                                        <select class="form-control select2" id="coche_id" name="coche_id" required>
                                            <option value="">Selecciona un coche</option>
                                            @foreach($coches as $coche)
                                                <option value="{{ $coche->id }}">{{ $coche->matricula }} - {{ $coche->marca }} {{ $coche->modelo }}</option>
                                            @endforeach
                                        </select>
                                    </div>
                                   
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="color">Color</label>
                                    <input type="text" class="form-control" id="color" name="color">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="kilometraje">Kilometraje</label>
                                    <input type="number" name="kilometraje" class="form-control">
                                </div>
                            </div>

                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="ingreso_grua">Ingreso en Grua</label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="ingreso_grua" id="ingreso_grua_no" value="0" checked>
                                            <label class="form-check-label" for="ingreso_grua_no">
                                                No
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="ingreso_grua" id="ingreso_grua_si" value="1">
                                            <label class="form-check-label" for="ingreso_grua_si">
                                                Sí
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="fecha_ingreso">Fecha Ingreso</label>
                                    <input type="date" name="fecha_ingreso" class="form-control" id="fecha_ingreso">
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label for="fecha_salida">Fecha Salida</label>
                                    <input type="date" name="fecha_salida" class="form-control">
                                </div>
                            </div>
                            <!-- ingreso en grua booleano -->
                            
                            <!-- Trabajo a realizar textarea -->
                            <div class="col-md-12">
                                <div class="form-group mb-3">
                                    <label for="trabajo_a_realizar">Trabajo a Realizar</label>
                                    <textarea name="trabajo_a_realizar" class="form-control"></textarea>
                                </div>
                            </div>

                            <!-- Observaciones -->
                            <div class="col-md-12">
                                <div class="form-group mb-3">
                                    <label for="observaciones">Observaciones</label>
                                    <textarea name="observaciones" class="form-control"></textarea>
                                </div>
                            </div>
                            <div class="col-md-1">
                                
                            </div>
                            <div class="col-md-1">
                                <div class="form-group mb-3">
                                    <svg fill="#000000" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                            viewBox="0 0 512.003 512.003" xml:space="preserve">
                                        <g>
                                            <g>
                                                <g>
                                                    <path d="M256.006,128c0-70.579-57.421-128-128-128s-128,57.421-128,128s57.421,128,128,128S256.006,198.579,256.006,128z"/>
                                                    <path d="M384.001,119.467c28.237,0,51.2-22.963,51.2-51.2s-22.963-51.2-51.2-51.2c-28.237,0-51.2,22.963-51.2,51.2
                                                        S355.765,119.467,384.001,119.467z M384.001,34.133c18.825,0,34.133,15.309,34.133,34.133S402.826,102.4,384.001,102.4
                                                        c-18.825,0-34.133-15.309-34.133-34.133S365.177,34.133,384.001,34.133z"/>
                                                    <path d="M509.394,105.5c1.664-1.613,2.603-3.823,2.603-6.135l-0.008-48.162c0-3.447-2.074-6.554-5.257-7.885
                                                        c-3.157-1.306-6.827-0.597-9.293,1.826L388.878,152.877c-7.902-10.453-18.884-18.022-31.77-21.572
                                                        c-31.13-8.542-63.215,8.832-73.011,39.62l-32.973,103.723l-6.153-6.153c-3.2-3.2-8.866-3.2-12.066,0l-24.132,24.141
                                                        c-3.337,3.328-3.337,8.73,0,12.066l9.404,9.404l-81.067-10.129c-12.561-1.596-24.619,6.477-27.955,18.722L69.51,468.064
                                                        c-2.586,9.472-1.033,19.644,4.267,27.913c5.291,8.26,13.884,13.935,23.569,15.548c1.894,0.316,3.789,0.469,5.666,0.469
                                                        c14.95,0,28.672-9.754,33.254-24.405l31.428-100.582c1.263-4.036,5.325-6.596,9.566-5.939L305.371,401.3l108.203,108.203
                                                        c1.596,1.596,3.772,2.5,6.033,2.5s4.429-0.905,6.033-2.5l24.132-24.141c3.337-3.337,3.337-8.73,0-12.066L347.713,371.237
                                                        l48.111-155.93L509.394,105.5z M179.914,364.214c-12.467-1.971-24.738,5.632-28.51,17.707l-31.428,100.582
                                                        c-2.628,8.397-11.187,13.628-19.823,12.186c-5.009-0.828-9.267-3.644-12.006-7.919c-2.739-4.267-3.507-9.318-2.176-14.217
                                                        l39.646-145.365c1.024-3.763,4.497-6.349,8.32-6.349c0.35,0,0.708,0.026,1.058,0.068l102.844,12.851l47.01,47.019
                                                        L179.914,364.214z M383.801,193.598c-0.29,2.722-0.819,5.436-1.647,8.115l-1.997,6.468L334.06,357.583l-69.35-69.35
                                                        l35.661-112.137c7.006-22.016,29.961-34.466,52.207-28.331c11.281,3.106,20.582,10.462,26.206,20.719
                                                        c0.683,1.246,1.101,2.586,1.656,3.874c0.717,1.698,1.451,3.388,1.946,5.146c0.239,0.836,0.341,1.707,0.529,2.56
                                                        c0.393,1.809,0.802,3.61,0.956,5.444c0.094,1.109,0,2.227,0,3.345C383.886,190.432,383.971,192.02,383.801,193.598z"/>
                                                </g>
                                            </g>
                                        </g>
                                        </svg>
                                        <input type="hidden" name="airbag" value="0">

                                </div>
                            </div>

                            <div class="col-md-1">
                                                                <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
                                <svg id="svg1" fill="#000000" width="50px" height="50px" viewBox="0 -14.14 122.88 122.88" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  style="enable-background:new 0 0 122.88 94.59" xml:space="preserve">

                                    <style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style>
                                    
                                    <g>
                                    
                                    <path class="st0" d="M43.58,92.2L31.9,80.53h-8.04c-2.81,0-5.11-2.3-5.11-5.11v-8.7h-4.87V76.9c0,2.17-1.78,3.95-3.95,3.95H3.95 C1.78,80.85,0,79.07,0,76.9V42.4c0-2.17,1.78-3.95,3.95-3.95h5.98c2.17,0,3.95,1.78,3.95,3.95v10.18h4.87v-9.36 c0-2.81,2.3-5.11,5.11-5.11h8.54l12.07-12.83c1.4-1.22,3.26-1.65,5.43-1.56h49.73c1.72,0.19,3.03,0.85,3.83,2.09 c0.8,1.22,0.67,1.91,0.67,3.28v23.49H109V42.4c0-2.17,1.78-3.95,3.95-3.95h5.98c2.17,0,3.95,1.78,3.95,3.95v34.5 c0,2.17-1.78,3.95-3.95,3.95h-5.98c-2.17,0-3.95-1.78-3.95-3.95V66.72h-4.87v0.92c0,2.73,0.08,4.38-1.66,6.64 c-0.33,0.43-0.7,0.84-1.11,1.22L83.53,92.96c-0.89,0.99-2.24,1.53-4.02,1.63h-30.4C46.84,94.49,44.99,93.71,43.58,92.2L43.58,92.2z M63.71,61.78l-12.64-1.19l10.48-22.96h14.33l-8.13,13.17l14.62,1.62L55.53,84.64L63.71,61.78L63.71,61.78z M51.98,0h34.5 c2.17,0,3.95,1.78,3.95,3.95v5.98c0,2.17-1.78,3.95-3.95,3.95H76.3v5.03H62.16v-5.03H51.98c-2.17,0-3.95-1.78-3.95-3.95V3.95 C48.03,1.78,49.81,0,51.98,0L51.98,0z"/>
                                    
                                    </g>
                                    
                                    </svg>
                                    <input type="hidden" name="motor" value="0">

                            </div>

                            <div class="col-md-1">
                                <svg width="50px" height="50px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 10V11.5M12 14H12.01M19.5 7.02344C20.4478 8.4489 21 10.16 21 12.0001C21 13.8402 20.4478 15.5514 19.5 16.9768M4.5 7.02344C3.55223 8.4489 3 10.16 3 12.0001C3 13.8402 3.55223 15.5514 4.5 16.9768M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                <input type="hidden" name="abs" value="0">

                            </div>

                            <div class="col-md-1">
                                <svg fill="#000000" width="50px" height="50px" viewBox="0 -64 640 640" xmlns="http://www.w3.org/2000/svg"><path d="M629.8 160.31L416 224l-50.49-25.24a64.07 64.07 0 0 0-28.62-6.76H280v-48h56c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h56v48h-56L37.72 166.86a31.9 31.9 0 0 0-5.79-.53C14.67 166.33 0 180.36 0 198.34v94.95c0 15.46 11.06 28.72 26.28 31.48L96 337.46V384c0 17.67 14.33 32 32 32h274.63c8.55 0 16.75-3.42 22.76-9.51l212.26-214.75c1.5-1.5 2.34-3.54 2.34-5.66V168c.01-5.31-5.08-9.15-10.19-7.69zM96 288.67l-48-8.73v-62.43l48 8.73v62.43zm453.33 84.66c0 23.56 19.1 42.67 42.67 42.67s42.67-19.1 42.67-42.67S592 288 592 288s-42.67 61.77-42.67 85.33z"/></svg>
                                <input type="hidden" name="aceite" value="0">

                            </div>

                            <div class="col-md-1">
                                    <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                                width="50px" height="50px" viewBox="0 0 512 512"  xml:space="preserve">
                                        
                                        <g>
                                            <path d="M432,132V60h-96v72H176V60H80v72H0v320h512V132H432z M181.156,258.063H82.719V227.5h98.438V258.063z
                                                    M436,258.063h-33.938V292H371.5v-33.938h-33.938V227.5H371.5v-33.938h30.563V227.5H436V258.063z"/>
                                        </g>
                                        </svg>   
                                        <input type="hidden" name="bateria" value="0">
                         
                            </div>

                            <div class="col-md-1">
                            
                                <svg fill="#000000" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	                                viewBox="0 0 512 512" xml:space="preserve">
                                        <g>
                                            <g>
                                                <g>
                                                    <path d="M494.297,363.555c-0.327-3.24-2.41-6.029-5.411-7.265c-29.687-12.253-60.734-22.122-92.46-29.643
                                                    c-4.025-56.223-27.03-106.452-62.799-137.304l72.995-72.995c3.452-3.443,3.452-9.031,0-12.482l-24.964-24.973
                                                    c-3.31-3.31-9.172-3.31-12.482,0l-76.438,76.438c-0.909-2.648-1.421-5.42-1.421-8.271v-15.351
                                                    c0.115-0.071,0.212-0.159,0.327-0.221c2.445-1.439,4.785-3.019,7.036-4.732c0.185-0.141,0.38-0.274,0.565-0.424
                                                    c4.776-3.708,9.039-8.015,12.729-12.809c0.009-0.018,0.026-0.035,0.035-0.053c5.429-7.08,9.543-15.192,11.988-24.02
                                                    c0.106-0.38,0.194-0.759,0.291-1.139c0.609-2.348,1.103-4.74,1.465-7.177c0.097-0.627,0.212-1.245,0.291-1.88
                                                    c0.344-2.834,0.583-5.703,0.583-8.633C326.626,31.682,294.943,0,256.005,0s-70.621,31.682-70.621,70.621
                                                    c0,2.931,0.229,5.8,0.583,8.633c0.079,0.636,0.194,1.253,0.283,1.88c0.371,2.436,0.856,4.829,1.465,7.177
                                                    c0.097,0.38,0.185,0.759,0.291,1.139c2.454,8.828,6.559,16.94,11.997,24.02c0.009,0.018,0.018,0.035,0.035,0.053
                                                    c3.681,4.793,7.954,9.101,12.729,12.809c0.185,0.15,0.371,0.282,0.565,0.424c2.242,1.713,4.582,3.293,7.027,4.732
                                                    c0.115,0.062,0.221,0.15,0.335,0.221v15.351c0,10.072-5.959,19.341-15.536,24.179c-49.364,24.929-83.968,84.798-89.45,153.644
                                                    c-32.918,7.83-64.185,18.317-92.919,31.55c-2.887,1.333-4.838,4.122-5.102,7.3c-0.265,3.169,1.209,6.241,3.84,8.024l35.31,23.967
                                                    c2.277,1.536,5.129,1.924,7.742,1.068c17.32-5.738,34.083-10.761,50.432-15.086c1.236,49.496,10.726,93.793,27.233,125.537
                                                    c1.51,2.922,4.537,4.758,7.83,4.758h44.138c3.063,0,5.906-1.589,7.512-4.202c1.607-2.604,1.748-5.861,0.371-8.598
                                                    c-10.417-20.683-16.013-49.593-16.649-86.016c45.444-9.287,96.088-9.278,141.118-0.018c-0.636,36.44-6.232,65.351-16.649,86.034
                                                    c-1.386,2.737-1.245,5.994,0.362,8.598c1.607,2.613,4.458,4.202,7.521,4.202h44.138c3.293,0,6.312-1.836,7.83-4.758
                                                    c16.508-31.744,25.997-76.058,27.233-125.59c16.349,4.334,33.112,9.375,50.423,15.139c0.909,0.3,1.854,0.45,2.79,0.45
                                                    c1.748,0,3.478-0.521,4.952-1.518l35.31-23.967C493.158,369.938,494.632,366.777,494.297,363.555z M321.117,201.86
                                                    c31.638,26.712,52.506,70.612,57.3,120.435c-36.537-7.601-74.108-11.723-111.448-12.703c-1.121-0.035-2.242-0.062-3.363-0.088
                                                    c-4.334-0.088-8.678-0.336-13.003-0.336c-12.721,0-25.406,0.397-37.985,1.183L321.117,201.86z M213.121,187.004
                                                    c15.563-7.874,25.229-23.172,25.229-39.945v-8.139c5.65,1.457,11.546,2.322,17.655,2.322c6.1,0,11.997-0.865,17.655-2.322v8.139
                                                    c0,7.556,2.013,14.989,5.764,21.583L134.608,313.459C142.509,256.15,172.169,207.678,213.121,187.004z M356.472,494.345h-25.22
                                                    c8.651-23.066,13.03-52.674,13.03-88.276c0-4.114-2.842-7.68-6.85-8.607c-51.491-11.847-110.839-11.838-162.834,0
                                                    c-4.017,0.909-6.868,4.484-6.868,8.607c0,35.602,4.37,65.209,13.021,88.276h-25.212c-14.239-29.881-22.343-70.903-23.067-116.798
                                                    c3.266-0.847,6.541-1.651,9.816-2.419c9.092-2.013,18.044-3.752,26.924-5.288c1.554-0.274,3.09-0.494,4.635-0.75
                                                    c7.327-1.218,14.592-2.269,21.822-3.16c1.986-0.247,3.972-0.477,5.95-0.697c7.08-0.794,14.115-1.43,21.124-1.916
                                                    c1.686-0.115,3.372-0.256,5.049-0.353c35.752-2.11,70.974-0.256,107.617,5.623c0.124,0.018,0.256,0.035,0.388,0.062
                                                    c9.251,1.492,18.6,3.231,28.072,5.226c5.235,1.165,10.461,2.383,15.669,3.69C378.806,423.468,370.702,464.481,356.472,494.345z"/>
                                            </g>
                                        </g>
                                        </svg>
                                        <input type="hidden" name="cinturon" value="0">

                            
                            </div>
                            <div class="col-md-1">
                                <svg fill="#000000" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                viewBox="0 0 511.999 511.999" xml:space="preserve">
                                        <g>
                                            <g>
                                                <g>
                                                    <path d="M17.067,256c0-63.821,24.858-123.819,69.982-168.951c3.337-3.328,3.337-8.73,0-12.066c-3.328-3.337-8.73-3.337-12.066,0
                                                        C26.633,123.332,0,187.622,0,256s26.633,132.668,74.982,181.018c1.664,1.664,3.849,2.5,6.033,2.5
                                                        c2.185,0,4.369-0.836,6.033-2.5
                                                        c3.337-3.337,3.337-8.738,0-12.066C41.924,379.818,17.067,319.82,17.067,256z"/>
                                                    <path d="M437.017,74.983c-3.337-3.337-8.73-3.337-12.066,0c-3.336,3.336-3.336,8.73,0,12.066
                                                        C470.083,132.182,494.932,192.18,494.932,256c0,63.812-24.849,123.819-69.982,168.951c-3.336,3.328-3.336,8.73,0,12.066
                                                        c1.664,1.664,3.849,2.5,6.033,2.5c2.185,0,4.369-0.836,6.033-2.5c48.358-48.35,74.982-112.64,74.982-181.018
                                                        S485.375,123.333,437.017,74.983z"/>
                                                    <path d="M273.067,179.2H230.4v85.333h42.667c23.526,0,42.667-19.14,42.667-42.667C315.733,198.34,296.593,179.2,273.067,179.2z"
                                                        />
                                                    <path d="M256,68.266C152.482,68.266,68.267,152.482,68.267,256S152.482,443.733,256,443.733S443.733,359.517,443.733,256
                                                        S359.518,68.266,256,68.266z M273.067,281.6H230.4v76.8c0,4.719-3.823,8.533-8.533,8.533c-4.71,0-8.533-3.814-8.533-8.533
                                                        v-85.333v-102.4c0-4.719,3.823-8.533,8.533-8.533h51.2c32.939,0,59.733,26.803,59.733,59.733
                                                        C332.8,254.796,306.005,281.6,273.067,281.6z"/>
                                                </g>
                                            </g>
                                        </g>
                                </svg>
                                <input type="hidden" name="parking" value="0">

                            </div>

                            <div class="col-md-1">
                                <svg fill="#000000" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                        viewBox="0 0 512 512" xml:space="preserve">
                                    <g>
                                        <g>
                                            <g>
                                                <path d="M319.66,17.515C317.804,7.36,308.972,0,298.668,0C133.975,0,0.001,114.837,0.001,256c0,141.141,133.973,256,298.667,256
                                                    c10.304,0,19.136-7.381,20.992-17.536l2.197-12.053c26.069-153.365,26.048-305.792-0.043-453.077L319.66,17.515z"/>
                                                <path d="M373.015,146.285l106.667,64c3.435,2.069,7.232,3.051,10.965,3.051c7.253,0,14.315-3.691,18.304-10.368
                                                    c6.059-10.091,2.795-23.211-7.317-29.269l-106.667-64c-10.112-6.08-23.232-2.773-29.269,7.317
                                                    C359.639,127.127,362.903,140.226,373.015,146.285z"/>
                                                <path d="M501.638,301.702l-106.667-64c-10.133-6.08-23.232-2.773-29.269,7.317c-6.059,10.091-2.795,23.211,7.317,29.269
                                                    l106.667,64c3.435,2.069,7.232,3.029,10.944,3.029c7.253,0,14.315-3.669,18.325-10.347
                                                    C515.013,320.86,511.75,307.761,501.638,301.702z"/>
                                                <path d="M501.638,429.702l-106.667-64c-10.133-6.08-23.232-2.773-29.269,7.317c-6.059,10.091-2.795,23.211,7.317,29.269
                                                    l106.667,64c3.435,2.069,7.232,3.029,10.944,3.029c7.253,0,14.315-3.669,18.325-10.347
                                                    C515.013,448.86,511.75,435.761,501.638,429.702z"/>
                                            </g>
                                        </g>
                                    </g>
                                    </svg>
                                    <input type="hidden" name="luces" value="0">

                            </div>

                            <div class="col-md-1">
                                <svg fill="#000000" height="50px" width="50px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                        viewBox="0 0 280.077 280.077" xml:space="preserve">
                                    <g>
                                        <path d="M230.489,35.774c-0.877,0-1.777,0.126-2.677,0.373l-10.172,2.802l-10.563-25.73C204.085,5.93,195.242,0,187.362,0H88.511
                                            c-7.879,0-16.724,5.93-19.717,13.219L58.246,38.914l-10.045-2.767c-0.899-0.247-1.799-0.373-2.676-0.373
                                            c-4.808,0-8.297,3.672-8.297,8.732v5.996c0,5.906,4.806,10.711,10.712,10.711h1.151l-1.705,4.153
                                            c-2.78,6.771-5.043,18.236-5.043,25.559v51.112c0,5.906,4.806,10.712,10.712,10.712h13.99c5.906,0,10.712-4.806,10.712-10.712
                                            v-12.764h120.357v12.764c0,5.906,4.806,10.712,10.712,10.712h13.988c5.906,0,10.712-4.806,10.712-10.712V90.925
                                            c0-7.321-2.262-18.787-5.042-25.558l-1.705-4.153h1.293c5.906,0,10.712-4.805,10.712-10.711v-5.996
                                            C238.786,39.446,235.296,35.774,230.489,35.774z M65.927,55.396l15.977-38.919c1.789-4.36,7.11-7.927,11.823-7.927h88.418
                                            c4.713,0,10.034,3.567,11.823,7.927l15.978,38.919c1.789,4.36-0.603,7.927-5.315,7.927H71.243
                                            C66.53,63.324,64.138,59.756,65.927,55.396z M101.594,104.622c0,2.357-1.928,4.284-4.284,4.284H66.957
                                            c-2.356,0-4.284-1.928-4.284-4.284V90.055c0-2.356,1.928-4.284,4.284-4.284H97.31c2.356,0,4.284,1.928,4.284,4.284V104.622z
                                            M212.912,104.622c0,2.357-1.928,4.284-4.284,4.284h-30.352c-2.356,0-4.284-1.928-4.284-4.284V90.055
                                            c0-2.356,1.928-4.284,4.284-4.284h30.352c2.357,0,4.284,1.928,4.284,4.284V104.622z"/>
                                        <path d="M95.075,215.158c-3.042-3.213-6.414-5.855-9.398-8.191c-4.26-3.336-7.952-6.228-9.417-9.614
                                            c-1.408-4.375,0.213-10.732,3.834-14.91c4.341-5.009,3.799-12.587-1.209-16.928c-5.009-4.341-12.587-3.799-16.928,1.209
                                            c-9.334,10.77-12.649,26.384-8.249,38.852l0.174,0.463c3.794,9.483,11.115,15.217,16.998,19.824
                                            c2.596,2.033,5.048,3.953,6.871,5.906l0.442,0.45c7.635,7.362,10.111,14.324,1.35,30.003c-3.232,5.785-1.164,13.096,4.622,16.329
                                            c1.853,1.035,3.861,1.526,5.843,1.526c4.206,0,8.288-2.216,10.486-6.148C105.288,265.348,119.849,239.287,95.075,215.158z"/>
                                    </g>
                                    <g>
                                        <path d="M223.737,280.077c-1.981,0-3.99-0.491-5.843-1.526c-5.786-3.233-7.855-10.544-4.622-16.329
                                            c8.762-15.679,6.285-22.641-1.35-30.003l-0.442-0.45c-1.823-1.953-4.275-3.873-6.871-5.906
                                            c-5.883-4.607-13.204-10.341-16.998-19.824l-0.174-0.463c-4.4-12.468-1.085-28.081,8.249-38.852
                                            c4.341-5.008,11.919-5.55,16.928-1.209c5.008,4.341,5.55,11.919,1.209,16.928c-3.621,4.178-5.242,10.535-3.834,14.91
                                            c1.465,3.387,5.157,6.278,9.417,9.614c2.984,2.337,6.356,4.979,9.398,8.191c24.774,24.129,10.214,50.19,5.419,58.771
                                            C232.025,277.861,227.943,280.077,223.737,280.077z"/>
                                    </g>
                                    </svg>
                                    <input type="hidden" name="neumaticos" value="0">

                            </div>
                            <div class="col-md-1">
                                <svg fill="#000000" height="50px" width="50px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                                viewBox="0 0 512 512" xml:space="preserve">
                                        <g>
                                            <g>
                                                <g>
                                                    <path d="M490.667,458.664c-18.816,0-21.333-4.288-21.333-21.333c0-11.776-9.557-21.333-21.333-21.333
                                                        s-21.333,9.557-21.333,21.333c0,8.704-16.619,21.333-42.667,21.333c-26.048,0-42.667-12.629-42.667-21.333
                                                        c0-11.776-9.557-21.333-21.333-21.333s-21.333,9.557-21.333,21.333c0,8.704-16.619,21.333-42.667,21.333
                                                        s-42.667-12.629-42.667-21.333c0-11.776-9.557-21.333-21.333-21.333s-21.333,9.557-21.333,21.333
                                                        c0,8.704-16.619,21.333-42.667,21.333c-26.048,0-42.667-12.629-42.667-21.333c0-11.776-9.557-21.333-21.333-21.333
                                                        s-21.333,9.557-21.333,21.333c0,17.045-2.517,21.333-21.333,21.333C9.557,458.664,0,468.221,0,479.997
                                                        s9.557,21.333,21.333,21.333c14.229,0,34.219-2.944,48.043-17.088C84.565,494.888,105.088,501.33,128,501.33
                                                        c25.749,0,48.469-8.128,64-21.248c15.531,13.12,38.251,21.248,64,21.248s48.469-8.128,64-21.248
                                                        c15.531,13.12,38.251,21.248,64,21.248c22.912,0,43.435-6.443,58.624-17.088c13.824,14.144,33.813,17.088,48.043,17.088
                                                        c11.776,0,21.333-9.557,21.333-21.333S502.443,458.664,490.667,458.664z"/>
                                                    <path d="M405.333,330.664c0,17.045-2.517,21.333-21.333,21.333c-11.776,0-21.333,9.557-21.333,21.333s9.557,21.333,21.333,21.333
                                                        c14.229,0,34.219-2.944,48.043-17.088c15.189,10.645,35.712,17.088,58.624,17.088c11.776,0,21.333-9.557,21.333-21.333
                                                        s-9.557-21.333-21.333-21.333c-26.048,0-42.667-12.629-42.667-21.333c0-11.776-9.557-21.333-21.333-21.333
                                                        S405.333,318.888,405.333,330.664z"/>
                                                    <path d="M21.333,394.664c22.912,0,43.435-6.443,58.624-17.088c13.824,14.144,33.813,17.088,48.043,17.088
                                                        c11.776,0,21.333-9.557,21.333-21.333s-9.557-21.333-21.333-21.333c-18.816,0-21.333-4.288-21.333-21.333
                                                        c0-11.776-9.557-21.333-21.333-21.333S64,318.888,64,330.664c0,8.704-16.619,21.333-42.667,21.333
                                                        C9.557,351.997,0,361.554,0,373.33S9.557,394.664,21.333,394.664z"/>
                                                    <path d="M240.853,414.685c5.013,0.875,10.027,1.301,14.997,1.301c20.096,0,39.573-6.976,55.061-19.989
                                                        c19.328-16.277,30.421-40.085,30.421-65.323c0-15.083-4.096-29.781-11.627-42.667h43.627c29.397,0,53.333-23.936,53.333-53.333
                                                        c0-29.419-23.936-53.333-53.333-53.333H320v-21.333h53.333c29.397,0,53.333-23.936,53.333-53.333
                                                        c0-29.419-23.936-53.333-53.333-53.333h-57.664c-7.936-21.696-26.453-38.144-49.067-41.813
                                                        c-18.752-3.072-37.739,2.197-52.053,14.379C200.213,38.087,192,55.858,192,74.674v199.872
                                                        c-17.088,19.392-24.533,45.312-20.032,71.147C178.027,380.317,206.336,408.669,240.853,414.685z"/>
                                                </g>
                                            </g>
                                        </g>
                                        </svg>
                                        <input type="hidden" name="temperatura" value="0">

                            </div>

                            <div class="col-md-12" >
                                <label for="inventario" class="form-label text-center" style="width: 100%; margin-top: 20px; text-align: center; background-color: #000000; color: #ffffff; padding: 10px; border-radius: 10px;">INVENTARIO</label>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="gato" class="form-check-input" type="checkbox" value="1" id="gato">
                                    <label class="form-check-label" for="gato">
                                        Gato
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="antena" class="form-check-input" type="checkbox" value="1" id="antena">
                                    <label class="form-check-label" for="antena">
                                        Antena
                                    </label>

                                </div>
                            </div>
                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="herramientas" class="form-check-input" type="checkbox" value="1" id="herramientas">
                                    <label class="form-check-label" for="herramientas">
                                        Herramientas
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="emblemas" class="form-check-input" type="checkbox" value="1" id="emblemas">
                                    <label class="form-check-label" for="emblemas">
                                        Emblemas
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="triangulos" class="form-check-input" type="checkbox" value="1" id="triangulos">
                                    <label class="form-check-label" for="triangulos">
                                        Triángulos
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="tapones" class="form-check-input" type="checkbox" value="1" id="tapones">
                                    <label class="form-check-label" for="tapones">
                                        Tapones de rueda
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="tapas" class="form-check-input" type="checkbox" value="1" id="tapas">
                                    <label class="form-check-label" for="tapas">
                                        Tapas
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="cables" class="form-check-input" type="checkbox" value="1" id="cables">
                                    <label class="form-check-label" for="cables">
                                        Cables
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="llantas" class="form-check-input" type="checkbox" value="1" id="llantas">
                                    <label class="form-check-label" for="llantas">
                                        Llanta
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="radio" class="form-check-input" type="checkbox" value="1" id="radio">
                                    <label class="form-check-label" for="radio">
                                        Radio
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="extintor" class="form-check-input" type="checkbox" value="1" id="extintor">
                                    <label class="form-check-label" for="extintor">
                                        Extintor
                                    </label>

                                </div>
                            </div>

                            <div class="col-md-3">
                                <!-- checkboxes -->
                                <div class="form-check">
                                    <input name="encendedor" class="form-check-input" type="checkbox" value="1" id="encendedor">
                                    <label class="form-check-label" for="encendedor">
                                        Encendedor
                                    </label>

                                </div>
                            </div>
                            <style>
                                output{
                                    margin: 0 auto;
                                    width: 50%;
                                    text-align: right;                                
                                }
                            </style>
                            <div class="col-md-12 mt-3">
                                <canvas id="fuelGauge" width="200" height="200" style="cursor: pointer;"></canvas>
                                    <input type="hidden" name="nivel_gasolina" id="nivel_gasolina" value="-70">

                            </div>  
                            <style>
                                #fuelGauge {
                                    display: block;
                                    margin: 20px auto;
                                    background-color: #333;
                                    border-radius: 50%;
                                }
                            </style>

                            <div class="col-md-12 mt-3">
                                <div class="canvas-container" style="cursor: pointer; width: 80%; margin: 0 auto; display: flex; justify-content: center; align-items: center;">
                                    <img id="car-image" src="{{ asset('assets/images/coche.png') }}" alt="Coche" style="cursor: pointer; width: 80%;" />
                                    <canvas id="drawing-canvas" style="width: 80%;"></canvas>
                                </div>
                            </div>

                            <!-- Añade más campos según sea necesario -->
                        </div>
                        <button type="submit" class="btn btn-primary mt-3" style="margin-top: 300px !important;">Guardar</button>
                        <button type="button" class="btn btn-secondary mt-2" style="margin-top: 300px !important;" onclick="clearCanvas()">Borrar dibujo</button>

                    </form>
                </div>
            </div>
        </section>
        
    </div>
@endsection

@section('scripts')
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script>
    $(document).ready(function() {
        $('.select2').select2();
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const canvas = document.getElementById('drawing-canvas');
        const ctx = canvas.getContext('2d');
        const image = document.getElementById('car-image');

        // Redimensiona el canvas para coincidir con el tamaño de la imagen
        function resizeCanvas() {
            canvas.width = image.offsetWidth;
            canvas.height = image.offsetHeight;
            canvas.style.width = `${image.offsetWidth}px`;
            canvas.style.height = `${image.offsetHeight}px`;
        }

        // Redimensionar el canvas cuando la imagen haya cargado
        image.onload = resizeCanvas;

        // Redimensionar también si la ventana cambia de tamaño
        window.addEventListener('resize', resizeCanvas);

        // Variables para el dibujo
        let drawing = false;

        // Obtener coordenadas del mouse ajustadas al tamaño del canvas
        function getMousePos(event) {
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width; // Relación horizontal
            const scaleY = canvas.height / rect.height; // Relación vertical
            return {
                x: (event.clientX - rect.left) * scaleX,
                y: (event.clientY - rect.top) * scaleY,
            };
        }

        // Eventos de dibujo
        canvas.addEventListener('mousedown', (event) => {
            drawing = true;
            const pos = getMousePos(event);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        });

        canvas.addEventListener('mouseup', () => (drawing = false));
        canvas.addEventListener('mouseout', () => (drawing = false));

        canvas.addEventListener('mousemove', (event) => {
            if (!drawing) return;
            const pos = getMousePos(event);
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.strokeStyle = 'red';

            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        });

        window.clearCanvas = function() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        };

     // Función para guardar el canvas en base64
     window.saveCanvasToInput = function() {
            const fotoDanosInput = document.getElementById('foto_danos');
            const dataURL = canvas.toDataURL('image/png');
            console.log('Canvas Data URL:', dataURL); // Verifica el contenido del canvas
            fotoDanosInput.value = dataURL;
            return true; // Asegura que el formulario se envíe
        };
});
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const svgs = document.querySelectorAll('svg');

        svgs.forEach(svg => {
            svg.addEventListener('click', function () {
                this.classList.toggle('selected');
                const input = this.nextElementSibling;
                input.value = this.classList.contains('selected') ? '1' : '0';
            });
        });
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Establecer la fecha actual por defecto en el campo de fecha de ingreso
        const fechaIngresoInput = document.getElementById('fecha_ingreso');
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0'); // Meses van de 0 a 11
        const day = String(today.getDate()).padStart(2, '0');
        fechaIngresoInput.value = `${year}-${month}-${day}`;

        // ... existing code ...
    });
</script>
<script>
    const canvas = document.getElementById('fuelGauge');
    const ctx = canvas.getContext('2d');
    const marks = [-160, -125, -90, -50, -10];
    const labels = ['E', '1/4', '1/2', '3/4', 'F'];
    const angles = [-70, -50, -35, -15, 0, 15, 35, 55, 70];
    let angleIndex = 0; // Índice para recorrer los ángulos

    function drawGauge() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Dibujar el fondo del medidor
        ctx.fillStyle = '#333';
        ctx.beginPath();
        ctx.arc(100, 100, 90, 0, Math.PI * 2);
        ctx.fill();

        // Dibujar el arco del medidor con un radio más grande
        ctx.beginPath();
        ctx.arc(100, 100, 78, Math.PI * 1.1, Math.PI * 1.9);
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 10;
        ctx.stroke();

        // Dibujar las marcas
        ctx.font = '12px Arial';
        ctx.fillStyle = '#fff';
        marks.forEach((mark, index) => {
            const x = 100 + 85 * Math.cos((Math.PI / 180) * mark);
            const y = 100 + 95 * Math.sin((Math.PI / 180) * mark);
            ctx.fillText(labels[index], x - 10, y + 5);
        });

        // Dibujar la aguja
        ctx.save();
        ctx.translate(100, 100);
        ctx.rotate((Math.PI / 180) * angles[angleIndex]);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(0, -70);
        ctx.strokeStyle = 'red';
        ctx.lineWidth = 4;
        ctx.stroke();
        ctx.restore();

        // Dibujar el centro
        ctx.beginPath();
        ctx.arc(100, 100, 5, 0, Math.PI * 2);
        ctx.fillStyle = '#000';
        ctx.fill();
    }

    function updateNeedle() {
        // Incrementar el índice del ángulo
        angleIndex = (angleIndex + 1) % angles.length;
        // Actualizar el valor del campo oculto
        document.getElementById('nivel_gasolina').value = angles[angleIndex];
        drawGauge();
    }

    canvas.addEventListener('click', updateNeedle);

    drawGauge();
</script> 
@include('partials.toast')
@endsection

